<html>
    <head>
        <meta charset="utf-8">
        
            <script src="lib/bindings/utils.js"></script>
            <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/dist/vis-network.min.css" integrity="sha512-WgxfT5LWjfszlPHXRmBWHkV2eceiWTOBvrKCNbdgDYTHrT2AeLCGbF4sZlZw3UMN3WtL0tGUoIAKsu8mllg/XA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
            <script src="https://cdnjs.cloudflare.com/ajax/libs/vis-network/9.1.2/dist/vis-network.min.js" integrity="sha512-LnvoEWDFrqGHlHmDD2101OrLcbsfkrzoSpvtSQtxK3RMnRV0eOkhhBN2dXHKRrUU8p2DGRTk35n4O8nWSVe1mQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
            
        
<center>
<h1></h1>
</center>

<!-- <link rel="stylesheet" href="../node_modules/vis/dist/vis.min.css" type="text/css" />
<script type="text/javascript" src="../node_modules/vis/dist/vis.js"> </script>-->
        <link
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
          rel="stylesheet"
          integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
          crossorigin="anonymous"
        />
        <script
          src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
          crossorigin="anonymous"
        ></script>


        <center>
          <h1></h1>
        </center>
        <style type="text/css">

             #mynetwork {
                 width: 100%;
                 height: 900;
                 background-color: #222222;
                 border: 1px solid lightgray;
                 position: relative;
                 float: left;
             }

             

             

             
        </style>
    </head>


    <body>
        <div class="card" style="width: 100%">
            
            
            <div id="mynetwork" class="card-body"></div>
        </div>

        
        

        <script type="text/javascript">

              // initialize global variables.
              var edges;
              var nodes;
              var allNodes;
              var allEdges;
              var nodeColors;
              var originalNodes;
              var network;
              var container;
              var options, data;
              var filter = {
                  item : '',
                  property : '',
                  value : []
              };

              

              

              // This method is responsible for drawing the graph, returns the drawn network
              function drawGraph() {
                  var container = document.getElementById('mynetwork');

                  

                  // parsing and collecting nodes and edges from the python
                  nodes = new vis.DataSet([{"color": "#ff6b6b", "data": {"base_attributes": {"possession": ["old compass", "half-burned map"]}, "base_description": "A person who enters Arendale village holding an old compass and a half-burned map.", "chunk_id": [0], "id": "mira_stone", "name": "Mira Stone", "states": [], "type": "character"}, "font": {"color": "white"}, "id": "mira_stone", "label": "Mira Stone", "shape": "dot"}, {"color": "#4dabf7", "data": {"base_attributes": {}, "base_description": "The quiet village where Mira Stone enters.", "chunk_id": [0], "id": "arendale_village", "name": "Arendale Village", "states": [], "type": "location"}, "font": {"color": "white"}, "id": "arendale_village", "label": "Arendale Village", "shape": "dot"}, {"color": "#ff6b6b", "data": {"base_attributes": {}, "base_description": "A person who meets Elias Thorn in a village inn and needs someone to read ancient symbols.", "chunk_id": [1], "id": "mira", "name": "Mira", "states": [], "type": "character"}, "font": {"color": "white"}, "id": "mira", "label": "Mira", "shape": "dot"}, {"color": "#ff6b6b", "data": {"base_attributes": {}, "base_description": "A young scholar surrounded by scrolls who offers help to Mira.", "chunk_id": [1], "id": "elias_thorn", "name": "Elias Thorn", "states": [], "type": "character"}, "font": {"color": "white"}, "id": "elias_thorn", "label": "Elias Thorn", "shape": "dot"}, {"color": "#f783ac", "data": {"base_attributes": {"category": "symbols"}, "base_description": "The ancient symbols that Mira needs someone to read.", "chunk_id": [1], "id": "ancient_symbols", "name": "Ancient symbols", "states": [], "type": "item"}, "font": {"color": "white"}, "id": "ancient_symbols", "label": "Ancient symbols", "shape": "dot"}, {"color": "#f783ac", "data": {"base_attributes": {}, "base_description": "The map that Elias examines.", "chunk_id": [1], "id": "the_map", "name": "The map", "states": [], "type": "item"}, "font": {"color": "white"}, "id": "the_map", "label": "The map", "shape": "dot"}, {"color": "#4dabf7", "data": {"base_attributes": {}, "base_description": "The location where Mira meets Elias Thorn.", "chunk_id": [1], "id": "village_inn", "name": "Village Inn", "states": [], "type": "location"}, "font": {"color": "white"}, "id": "village_inn", "label": "Village Inn", "shape": "dot"}, {"color": "#ff6b6b", "data": {"base_attributes": {}, "base_description": "A character who is sent by Lord Darrin Vale to recover the map.", "chunk_id": [2], "id": "lord_darrin_vale", "name": "Sergeant Lorne", "states": [], "type": "character"}, "font": {"color": "white"}, "id": "lord_darrin_vale", "label": "Sergeant Lorne", "shape": "dot"}, {"color": "#4dabf7", "data": {"base_attributes": {}, "base_description": "The location where the scene takes place.", "chunk_id": [2], "id": "lord_darrin_vales_manor", "name": "Lord Darrin Vale\u0027s manor", "states": [], "type": "location"}, "font": {"color": "white"}, "id": "lord_darrin_vales_manor", "label": "Lord Darrin Vale\u0027s manor", "shape": "dot"}]);
                  edges = new vis.DataSet([{"arrows": "to", "data": {"data": {"chunk_id": 0, "description": "Mira Stone is located in Arendale Village.", "id": "mira_stone_is_located_in_arendale_village", "relation": "is located in", "source": "mira_stone", "target": "arendale_village", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "mira_stone", "to": "arendale_village"}, {"arrows": "to", "data": {"data": {"chunk_id": 0, "description": "Mira Stone is located in Arendale Village.", "id": "arendale_village_contains_character_mira_stone", "relation": "contains character", "source": "arendale_village", "target": "mira_stone", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "arendale_village", "to": "mira_stone"}, {"arrows": "to", "data": {"data": {"chunk_id": 1, "description": "Mira meets Elias Thorn in the Village Inn.", "id": "mira_meets_elias_thorn", "relation": "meets", "source": "mira", "target": "elias_thorn", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "mira", "to": "elias_thorn"}, {"arrows": "to", "data": {"data": {"chunk_id": 1, "description": "Mira needs someone to read the ancient symbols.", "id": "mira_needs_ancient_symbols", "relation": "needs", "source": "mira", "target": "ancient_symbols", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "mira", "to": "ancient_symbols"}, {"arrows": "to", "data": {"data": {"chunk_id": 1, "description": "Mira shows the map to Elias.", "id": "mira_shows_the_map", "relation": "shows", "source": "mira", "target": "the_map", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "mira", "to": "the_map"}, {"arrows": "to", "data": {"data": {"chunk_id": 2, "description": "Lord Darrin Vale receives news about Mira\u0027s arrival.", "id": "mira_is_the_subject_of_news_lord_darrin_vale", "relation": "is the subject of news", "source": "mira", "target": "lord_darrin_vale", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "mira", "to": "lord_darrin_vale"}, {"arrows": "to", "data": {"data": {"chunk_id": 1, "description": "Mira meets Elias Thorn in the Village Inn.", "id": "elias_thorn_is_met_by_mira", "relation": "is met by", "source": "elias_thorn", "target": "mira", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "elias_thorn", "to": "mira"}, {"arrows": "to", "data": {"data": {"chunk_id": 1, "description": "Elias offers help to Mira with the ancient symbols.", "id": "elias_thorn_offers_help_with_ancient_symbols", "relation": "offers help with", "source": "elias_thorn", "target": "ancient_symbols", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "elias_thorn", "to": "ancient_symbols"}, {"arrows": "to", "data": {"data": {"chunk_id": 1, "description": "Elias examines the map.", "id": "elias_thorn_examines_the_map", "relation": "examines", "source": "elias_thorn", "target": "the_map", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "elias_thorn", "to": "the_map"}, {"arrows": "to", "data": {"data": {"chunk_id": 1, "description": "Mira needs someone to read the ancient symbols.", "id": "ancient_symbols_is_needed_by_mira", "relation": "is needed by", "source": "ancient_symbols", "target": "mira", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "ancient_symbols", "to": "mira"}, {"arrows": "to", "data": {"data": {"chunk_id": 1, "description": "Elias offers help to Mira with the ancient symbols.", "id": "ancient_symbols_receives_help_from_elias_thorn", "relation": "receives help from", "source": "ancient_symbols", "target": "elias_thorn", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "ancient_symbols", "to": "elias_thorn"}, {"arrows": "to", "data": {"data": {"chunk_id": 1, "description": "Mira shows the map to Elias.", "id": "the_map_is_shown_by_mira", "relation": "is shown by", "source": "the_map", "target": "mira", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "the_map", "to": "mira"}, {"arrows": "to", "data": {"data": {"chunk_id": 1, "description": "Elias examines the map.", "id": "the_map_is_examined_by_elias_thorn", "relation": "is examined by", "source": "the_map", "target": "elias_thorn", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "the_map", "to": "elias_thorn"}, {"arrows": "to", "data": {"data": {"chunk_id": 2, "description": "Sergeant Lorne is ordered to recover the map.", "id": "the_map_is_the_subject_of_recovery_order_sergeant_lorne", "relation": "is the subject of recovery order", "source": "the_map", "target": "lord_darrin_vale", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "the_map", "to": "lord_darrin_vale"}, {"arrows": "to", "data": {"data": {"chunk_id": 2, "description": "Lord Darrin Vale receives news about Mira\u0027s arrival.", "id": "lord_darrin_vale_receives_news_of_arrival_mira", "relation": "receives news of arrival", "source": "lord_darrin_vale", "target": "mira", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "lord_darrin_vale", "to": "mira"}, {"arrows": "to", "data": {"data": {"chunk_id": 2, "description": "Lord Darrin Vale signals to Sergeant Lorne.", "id": "lord_darrin_vale_signals_sergeant_lorne", "relation": "signals", "source": "lord_darrin_vale", "target": "lord_darrin_vale", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "lord_darrin_vale", "to": "lord_darrin_vale"}, {"arrows": "to", "data": {"data": {"chunk_id": 2, "description": "Lord Darrin Vale signals to Sergeant Lorne.", "id": "sergeant_lorne_receives_signal_lord_darrin_vale", "relation": "receives signal", "source": "lord_darrin_vale", "target": "lord_darrin_vale", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "lord_darrin_vale", "to": "lord_darrin_vale"}, {"arrows": "to", "data": {"data": {"chunk_id": 2, "description": "Lord Darrin Vale sends Sergeant Lorne on a mission.", "id": "lord_darrin_vale_sends_sergeant_lorne", "relation": "sends", "source": "lord_darrin_vale", "target": "lord_darrin_vale", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "lord_darrin_vale", "to": "lord_darrin_vale"}, {"arrows": "to", "data": {"data": {"chunk_id": 2, "description": "Lord Darrin Vale sends Sergeant Lorne on a mission.", "id": "sergeant_lorne_receives_order_lord_darrin_vale", "relation": "receives order", "source": "lord_darrin_vale", "target": "lord_darrin_vale", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "lord_darrin_vale", "to": "lord_darrin_vale"}, {"arrows": "to", "data": {"data": {"chunk_id": 2, "description": "Sergeant Lorne is ordered to recover the map.", "id": "sergeant_lorne_is_ordered_to_recover_the_map", "relation": "is ordered to recover", "source": "lord_darrin_vale", "target": "the_map", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "lord_darrin_vale", "to": "the_map"}, {"arrows": "to", "data": {"data": {"chunk_id": 2, "description": "Lord Darrin Vale\u0027s manor is the location of Lord Darrin Vale.", "id": "lord_darrin_vale_is_located_at_lord_darrin_vales_manor", "relation": "is located at", "source": "lord_darrin_vale", "target": "lord_darrin_vales_manor", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "lord_darrin_vale", "to": "lord_darrin_vales_manor"}, {"arrows": "to", "data": {"data": {"chunk_id": 2, "description": "Lord Darrin Vale\u0027s manor is the location of Lord Darrin Vale.", "id": "lord_darrin_vales_manor_located_in_lord_darrin_vale", "relation": "located in", "source": "lord_darrin_vales_manor", "target": "lord_darrin_vale", "time_end_event": null, "time_start_event": null, "weight": 1.0}}, "from": "lord_darrin_vales_manor", "to": "lord_darrin_vale"}]);

                  nodeColors = {};
                  allNodes = nodes.get({ returnType: "Object" });
                  for (nodeId in allNodes) {
                    nodeColors[nodeId] = allNodes[nodeId].color;
                  }
                  allEdges = edges.get({ returnType: "Object" });
                  // adding nodes and edges to the graph
                  data = {nodes: nodes, edges: edges};

                  var options = {
    "configure": {
        "enabled": false
    },
    "edges": {
        "color": {
            "inherit": true
        },
        "smooth": {
            "enabled": true,
            "type": "dynamic"
        }
    },
    "interaction": {
        "dragNodes": true,
        "hideEdgesOnDrag": false,
        "hideNodesOnDrag": false
    },
    "physics": {
        "barnesHut": {
            "avoidOverlap": 0,
            "centralGravity": 0.3,
            "damping": 0.9,
            "gravitationalConstant": -30000,
            "springConstant": 0.02,
            "springLength": 60
        },
        "enabled": true,
        "stabilization": {
            "enabled": true,
            "fit": true,
            "iterations": 1000,
            "onlyDynamicEdges": false,
            "updateInterval": 50
        }
    }
};

                  


                  

                  network = new vis.Network(container, data, options);

                  

                  

                  


                  

                  return network;

              }
              drawGraph();
        </script>
    
            <style>
            #infoPanel {
                position: fixed;
                top: 20px;
                right: 20px;
                max-width: 600px;
                background: #1e1e1e;
                color: white;
                padding: 16px;
                border-radius: 8px;
                border: 1px solid #444;
                font-family: Consolas, monospace;
                font-size: 13px;
                display: none;
                z-index: 9999;
                white-space: pre-wrap;
            }
            #infoPanel h3 {
                margin: 0 0 10px 0;
                font-size: 15px;
            }
            </style>
            <div id="infoPanel"></div>
            <script>
            function showPanel(title, data) {
                const panel = document.getElementById("infoPanel");
                panel.style.display = "block";
                panel.innerHTML = "<h3>" + title + "</h3>" +
                                "<pre>" + JSON.stringify(data, null, 2) + "</pre>";
            }

            function hidePanel() {
                document.getElementById("infoPanel").style.display = "none";
            }
            setTimeout(() => {
                if (!window.network) return;
                network.on("click", function (params) {
                    if (params.nodes.length === 0 && params.edges.length === 0) {
                        hidePanel();
                        return;
                    }
                    if (params.nodes.length === 1) {
                        const nodeId = params.nodes[0];
                        const node = network.body.data.nodes.get(nodeId);
                        showPanel("Node: " + nodeId, node.data || {});
                        return;
                    }
                    if (params.edges.length === 1) {
                        const edgeId = params.edges[0];
                        const edge = network.body.data.edges.get(edgeId);
                        showPanel("Edge: " + edge.from + " â†’ " + edge.to, edge.data || {});
                        return;
                    }
                });

            }, 300);
            </script>
        
</body>
</html>